---
title: Regular正则笔记
categories: ''
tags:
  - null
date: 2018-06-21 00:31:00
---

**概述：** 在学习Python re库的时候发现正则是神器，不过比较难记，所以在这里备忘..

 <!-- more -->

# 正则表达式Tips

@[TOC]

## 大小写

- **不区分大小写：** 下面是两种写法：

``` python
>>> re.findall('(?i:p)ython', data)
['python', 'Python']

>>> re.findall('(?i)python')
['python', 'Python']
```

- **区分大小写：** 默认是区分的，强制区分：

``` python
>>> re.findall('(?-i:p)ython')
['python']
```

## 数量

- `*`：0或更多次
- `+`：1或更多次
- `?`：0或1次

## 贪婪/非贪婪

默认是贪婪模式，加上`?`后变为非贪婪模式：

- `*?`、`+?`、`??`均为非贪婪模式

``` python
>>> data = '<a> b <c>'
>>> re.findall('\<.*\>', data)
['<a> b <c>']
>>> re.findall('\<.*?\>', data)
['<a>', '<c>']
```

- `{m,n}?`同样转化为非贪婪模式

``` python
>>> data = 'aaaaaa'
>>> re.findall('a{3,5}', data)
['aaaaa']
>>> re.findall('a{3,5}?', data)
['aaa', 'aaa']
```

## 预查

### (?:pattern)

`(?:pattern)`: 模糊查找, 可有可无, 并且将匹配到的结果也包含在全部结果之中.

例如:

```python
data = """line."""

prog = re.compile(r'line(?:\.)', flags=0)
result = prog.search(data)
print(result.group())

# 结果:
line.
```

pattern中支持`|`可同时查找多个不同结果.

### (?=pattern)

`x(?=pattern)`: 正向肯定预查(look ahead positive assert), 同样是模糊查找, 如果匹配到了pattern, 那就认为前面的表达式`x`成立. 这与`(?:)`很相似, 不过输出中不包含pattern所匹配的内容, 而只有x.

例如:

```python
data = """line."""

prog = re.compile(r'line(?=\.)', flags=0)
result = prog.search(data)
print(result.group())

# 结果, 注意结尾的句号:
line
```

pattern中支持`|`可同时查找多个不同结果.

### (?!pattern)

如果说`(?=)`是白名单, 那么`(?!)`就是黑名单版本.

### (?<=pattern)

反向(look behind)肯定预查, 就是查后面的表达式 ,举个例子:

有以下字符串:

`ABC`

`A(?=B)`: 可以匹配, 结果为A;
`(?=B)C`: 不能匹配;
`(?<=B)C`: 可以匹配, 结果为C;

## 声明

**版权：** 2018-now，:cn:，zangjiaao\<zangjiaao@yahoo.com>

由家浩创作并维护的`zangjiaao's blog`博客所有文章除特别声明外，均采用"署名-非商业性使用-相同方式共享4.0(CC BY-NC-SA 4.0)[国际许可证](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)"。

本文首发于[zangjiaao's blog](https://blog.zangjiaao.cn/)博客，转载请注明出处。
