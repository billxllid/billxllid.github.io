---
title: SQL语法速查
categories: '04_学习笔记'
tags:
  - SQL
  - 速查
date: 2018-06-14 02:49:04
---

**概述：** 在使用python控制mysql(mariadb)的时候不懂SQL真是急死人:cold_sweat:..学习一下SQL语法，填一下以前的坑..主要参考《MySQL必知必会》这本教材，写的不错安利一下~

 <!-- more -->

# SQL语法速查

@[TOC]

## 常用SQL

### 创建数据库

``` sql
CREATE DEATABASE test
```

这里应该还有权限设置，root默认会有全部数据库的权限。

### 修改数据库编码

```
ALTER DATABASE dbname CHARACTER SET utf8 COLLATE utf8_general_ci;
```

更多请见：[这篇文章](https://www.a2hosting.com/kb/developer-corner/mysql/convert-mysql-database-utf-8)。

### 创建表

``` sql
CREATE TABLE user(
  username VARCHAR(20) NOT NULL,
  userpass VARCHAR(20) NOT NULL,
  email VARCHAR(50)
)
```

### 查找数据

``` sql
SELECT username
FROM user
WHERE username != 'test01'
# 按照email排序，然后再用userpass排序，DECS表示倒序
ORDER BY email, userpass DESC

# 只显示从第0行开始，的10行（不是第10行）
# LIMIT只能在末尾
LIMIT 0, 10
```

``` sql
WHERE username = 'test02'
OR email = 'test02@qq.com'
AND userpass = 'qwe123'
```

``` sql
WHERE username BETWEEN 1 AND 10

# 可能只针对数字类型
WHERE username NOT IN (1, 10)
```

``` sql
WHERE username

# 只匹配一个字符
LIKE '_00'

# 类似于'.00.'
LIKE '%00%'
```

### 通配符搜索

``` sql
WHERE username
REGEXP '.0.'

# 非1|2|3
REGEXP '[^123]'

# 转义
REGEXP '\\.'
```

{% asset_path 20180614-SQL语法速查 %}

- **匹配元字符**

{% asset_img REGEXP02.png 匹配元字符 %}

- **匹配字符类**

{% asset_img REGEXP01.png 匹配字符类 %}

- **重复元字符**

{% asset_img REGEXP03.png 重复元字符 %}

- **定位元字符**

{% asset_img REGEXP04.png 定位元字符 %}

### 函数

- `Content()`

在mysq中用来拼接字段，其他数据库多数使用`+`或者`||`：

``` sql
SELECT Concat(username, userpass)
FROM user
WHERE username = '500'

输出：
+----------------------------+
| Concat(username, userpass) |
+----------------------------+
| 500qwe123                  |
+----------------------------+

# 当然也可以像字符串一样操作
SELECT Concat(username, '\(', userpass, '\)')
FROM user
WHERE username = '500';
```

- `RTrim()`和`LTrim()`以及`Trim()`

用于去掉左边或者右边的，或者同时两边的`空格`。

### 插入数据

``` sql
INSERT INTO test(
  username,
  userpass,
  email
)VALUE(%s, %s, %s)
```

### 修改数据

``` sql
UPDATE user
SET username=%s
WHERE username=%s
```

注意这里的顺序，前面才是更新的内容

### 删除内容

``` sql
DELETE FROM user
WHERE username=%s
```

## 声明

**版权：** 2018-now，:cn:，zangjiaao\<zangjiaao@yahoo.com>

由家浩创作并维护的`zangjiaao's blog`博客所有文章除特别声明外，均采用"署名-非商业性使用-相同方式共享4.0(CC BY-NC-SA 4.0)[国际许可证](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)"。

本文首发于[zangjiaao's blog](https://blog.zangjiaao.cn/)博客，转载请注明出处。
