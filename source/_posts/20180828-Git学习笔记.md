---
title: Git学习笔记
categories: 04_学习笔记
tags:
 - git
date: 2018-08-28 02:33:44
---

**概述：** 顾名思义, Git笔记! 推荐下官方教材[Pro Git book](https://git-scm.com/book/zh/v1/)在线版(支持中文哦~).

 <!-- more -->

{% asset_path 20180828-Git学习笔记 %}

# Git学习笔记

@[TOC]

## TODO

- [ ] 待整理

## 特别推荐:XMind

{% asset_img 2018-09-02-14-51-59.png git学习脑图 %}

[下载链接](https://pan.baidu.com/s/1vL6pUIN1wMihvKiY6QmC0Q)(密码:s59c)

## 便于记忆

``` git
# 查看branch
git branch

# 查看远端branch
git branch -r

# 创建brach
git branch xxx

# 切换branch
git checkout xxx

# 切换时创建branch
git checkout -b xxx

# 删除本地branch
git branch -d xxx

# 强制删除(branch修改后没有merge)
git branch -D xxx

# 删除远端branch
git branch -r -d origin/xxx
git push origin :xxx
or
git push origin --delete xxx

# 创建本地git
git init
# 添加git remote源
git remote add origin git:xxx
# 添加git remote源, 同时fetch
git remote add origin -f git:xxx
# 修改git remote的name
git remote rename origin xxx

# 操作回滚
git log xxx  # 查看修改, 获取commit id
git reset --hard xxxxxx  # 回归到上一次提交

# 子模块管理(将子模块绑定到xxx目录下, 会自动生成一个.gitmoudle)
git submodule add git@xxx xxx

# 子模块初始化(clone下来但是没有加--res)
cd xxx
git submodule init
git submodule update

# 子模块管理, 更新全部子模块(递归更新)
git submodule update --init --recursive

# 在clone时就递归更新所有子模块
git clone git@xxx --recursive
or  # 没试过, 应该一样
git clone ggit@xxx --recurse-submodules
```

[geeeeeeeeek/git-recipes](https://github.com/geeeeeeeeek/git-recipes/wiki/5.2-%E4%BB%A3%E7%A0%81%E5%9B%9E%E6%BB%9A%EF%BC%9AReset%E3%80%81Checkout%E3%80%81Revert-%E7%9A%84%E9%80%89%E6%8B%A9)

`--soft`: 缓存区和工作目录都不会被改变
`--mixed`: 默认选项。缓存区和你指定的提交同步，但工作目录不受影响
`--hard`: 缓存区和工作目录都同步到你指定的提交

## gitignore用法

[github/gitignore](https://github.com/github/gitignore)

由于git是不能提交空目录的, 如果需要保留目录, 就需要在要保留的目录下创建一个`.gitkeep`文件, 可以为空. 使用`.ignore`也可以.

## 分支的新建与合并

from: [Git - 分支的新建与合并](https://git-scm.com/book/zh/v1/Git-%E5%88%86%E6%94%AF-%E5%88%86%E6%94%AF%E7%9A%84%E6%96%B0%E5%BB%BA%E4%B8%8E%E5%90%88%E5%B9%B6)

## 删除远程分支

from: [git怎么删除远程分支 - SegmentFault 思否](https://segmentfault.com/q/1010000008841093)

删除远程分支和tag

在Git v1.7.0 之后，可以使用这种语法删除远程分支：

```
git push origin --delete <branchName>
```

删除tag这么用：

```
git push origin --delete tag <tagname>
```

否则，可以使用这种语法，推送一个空分支到远程分支，其实就相当于删除远程分支：

```
git push origin :<branchName>
```

这是删除tag的方法，推送一个空tag到远程tag：

```
git tag -d <tagname>
git push origin :refs/tags/<tagname>
```

两种语法作用完全相同。

删除不存在对应远程分支的本地分支

假设这样一种情况：

我创建了本地分支b1并pull到远程分支 origin/b1；
其他人在本地使用fetch或pull创建了本地的b1分支；
我删除了 origin/b1 远程分支；
其他人再次执行fetch或者pull并不会删除这个他们本地的 b1 分支，运行 git branch -a 也不能看出这个branch被删除了，如何处理？
使用下面的代码查看b1的状态：

```
$ git remote show origin
* remote origin
  Fetch URL: git@github.com:xxx/xxx.git
  Push  URL: git@github.com:xxx/xxx.git
  HEAD branch: master
  Remote branches:
    master                 tracked
    refs/remotes/origin/b1 stale (use 'git remote prune' to remove)
  Local branch configured for 'git pull':
    master merges with remote master
  Local ref configured for 'git push':
    master pushes to master (up to date)
```

这时候能够看到b1是stale的，使用 git remote prune origin 可以将其从本地版本库中去除。

更简单的方法是使用这个命令，它在fetch之后删除掉没有与远程分支对应的本地分支：

git fetch -p

## 声明

**版权：** 2018-now，:cn:，zangjiaao\<zangjiaao@yahoo.com>

由家浩创作并维护的`zangjiaao's blog`博客所有文章除特别声明外，均采用"署名-非商业性使用-相同方式共享4.0(CC BY-NC-SA 4.0)[国际许可证](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)"。

本文首发于[zangjiaao's blog](https://blog.zangjiaao.cn/)博客，转载请注明出处。
